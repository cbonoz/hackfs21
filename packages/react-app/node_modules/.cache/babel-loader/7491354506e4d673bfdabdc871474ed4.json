{"ast":null,"code":"var _s = $RefreshSig$();\n\n/* eslint-disable global-require */\nimport { useEffect, useState } from \"react\";\n\nconst {\n  ethers\n} = require(\"ethers\");\n/*\n  ~ What it does? ~\n\n  Loads your local contracts and gives options to read values from contracts\n  or write transactions into them\n\n  ~ How can I use? ~\n\n  const readContracts = useContractLoader(localProvider) // or\n  const writeContracts = useContractLoader(userProvider)\n\n  ~ Features ~\n\n  - localProvider enables reading values from contracts\n  - userProvider enables writing transactions into contracts\n  - Example of keeping track of \"purpose\" variable by loading contracts into readContracts\n    and using ContractReader.js hook:\n    const purpose = useContractReader(readContracts,\"YourContract\", \"purpose\")\n  - Example of using setPurpose function from our contract and writing transactions by Transactor.js helper:\n    tx( writeContracts.YourContract.setPurpose(newPurpose) )\n\n  config can include:\n  - chainId - to hardcode the chainId, irrespective of the providerOrSigner chainId\n  - hardhatNetworkName - to hardcode the hardhat network of interest\n  - customAddresses: { contractName: 0xCustomAddress } to hardcode the address for a given named contract\n  - hardhatContracts: object following the hardhat deploy export format (Json with chainIds as keys, which have hardhat network names as keys, which contain arrays of contracts for each)\n  - externalContracts: object with chainIds as keys, with an array of contracts for each\n*/\n\n\nexport default function useContractLoader(providerOrSigner, config = {}) {\n  _s();\n\n  const [contracts, setContracts] = useState();\n  const customAddressKeys = config.customAddresses && Object.keys(config.customAddresses).join();\n  const customAddressValues = config.customAddresses && Object.values(config.customAddresses).join();\n  useEffect(() => {\n    let active = true;\n\n    async function loadContracts() {\n      if (providerOrSigner && typeof providerOrSigner !== \"undefined\") {\n        console.log(`loading contracts`);\n\n        try {\n          // we need to check to see if this providerOrSigner has a signer or not\n          let signer;\n          let provider;\n          let accounts;\n\n          if (providerOrSigner && typeof providerOrSigner.listAccounts === \"function\") {\n            accounts = await providerOrSigner.listAccounts();\n          }\n\n          if (ethers.Signer.isSigner(providerOrSigner)) {\n            signer = providerOrSigner;\n            provider = signer.provider;\n          } else if (accounts && accounts.length > 0) {\n            signer = providerOrSigner.getSigner();\n            provider = providerOrSigner;\n          } else {\n            signer = providerOrSigner;\n            provider = providerOrSigner;\n          }\n\n          const providerNetwork = await provider.getNetwork();\n\n          const _chainId = config.chainId || providerNetwork.chainId;\n\n          let contractList = {};\n          let externalContractList = {};\n\n          try {\n            contractList = config.hardhatContracts || require(\"../contracts/hardhat_contracts.json\");\n          } catch (e) {\n            console.log(e);\n          }\n\n          try {\n            externalContractList = config.externalContracts || require(\"../contracts/external_contracts.js\");\n          } catch (e) {\n            console.log(e);\n          }\n\n          let combinedContracts = {};\n\n          if (contractList[_chainId]) {\n            for (const hardhatNetwork in contractList[_chainId]) {\n              if (Object.prototype.hasOwnProperty.call(contractList[_chainId], hardhatNetwork)) {\n                if (!config.hardhatNetworkName || hardhatNetwork === config.hardhatNetworkName) {\n                  combinedContracts = { ...combinedContracts,\n                    ...contractList[_chainId][hardhatNetwork].contracts\n                  };\n                }\n              }\n            }\n          }\n\n          if (externalContractList[_chainId]) {\n            combinedContracts = { ...combinedContracts,\n              ...externalContractList[_chainId].contracts\n            };\n          }\n\n          const newContracts = Object.keys(combinedContracts).reduce((accumulator, contractName) => {\n            const _address = config.customAddresses && Object.keys(config.customAddresses).includes(contractName) ? config.customAddresses[contractName] : combinedContracts[contractName].address;\n\n            accumulator[contractName] = new ethers.Contract(_address, combinedContracts[contractName].abi, signer);\n            return accumulator;\n          }, {});\n          if (active) setContracts(newContracts);\n        } catch (e) {\n          console.log(\"ERROR LOADING CONTRACTS!!\", e);\n        }\n      }\n    }\n\n    loadContracts();\n    return () => {\n      active = false;\n    };\n  }, [providerOrSigner, config.chainId, config.hardhatNetworkName, customAddressKeys, customAddressValues]);\n  return contracts;\n}\n\n_s(useContractLoader, \"QdqhxeNJlYzY0s8Kv146Q9mnkYo=\");","map":{"version":3,"sources":["/Users/chrisbuonocore/personal/hackathons/hackfs21/packages/react-app/src/hooks/ContractLoader.js"],"names":["useEffect","useState","ethers","require","useContractLoader","providerOrSigner","config","contracts","setContracts","customAddressKeys","customAddresses","Object","keys","join","customAddressValues","values","active","loadContracts","console","log","signer","provider","accounts","listAccounts","Signer","isSigner","length","getSigner","providerNetwork","getNetwork","_chainId","chainId","contractList","externalContractList","hardhatContracts","e","externalContracts","combinedContracts","hardhatNetwork","prototype","hasOwnProperty","call","hardhatNetworkName","newContracts","reduce","accumulator","contractName","_address","includes","address","Contract","abi"],"mappings":"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","sourcesContent":["/* eslint-disable global-require */\nimport { useEffect, useState } from \"react\";\n\nconst { ethers } = require(\"ethers\");\n\n/*\n  ~ What it does? ~\n\n  Loads your local contracts and gives options to read values from contracts\n  or write transactions into them\n\n  ~ How can I use? ~\n\n  const readContracts = useContractLoader(localProvider) // or\n  const writeContracts = useContractLoader(userProvider)\n\n  ~ Features ~\n\n  - localProvider enables reading values from contracts\n  - userProvider enables writing transactions into contracts\n  - Example of keeping track of \"purpose\" variable by loading contracts into readContracts\n    and using ContractReader.js hook:\n    const purpose = useContractReader(readContracts,\"YourContract\", \"purpose\")\n  - Example of using setPurpose function from our contract and writing transactions by Transactor.js helper:\n    tx( writeContracts.YourContract.setPurpose(newPurpose) )\n\n  config can include:\n  - chainId - to hardcode the chainId, irrespective of the providerOrSigner chainId\n  - hardhatNetworkName - to hardcode the hardhat network of interest\n  - customAddresses: { contractName: 0xCustomAddress } to hardcode the address for a given named contract\n  - hardhatContracts: object following the hardhat deploy export format (Json with chainIds as keys, which have hardhat network names as keys, which contain arrays of contracts for each)\n  - externalContracts: object with chainIds as keys, with an array of contracts for each\n*/\n\nexport default function useContractLoader(providerOrSigner, config = {}) {\n  const [contracts, setContracts] = useState();\n\n  const customAddressKeys = config.customAddresses && Object.keys(config.customAddresses).join();\n  const customAddressValues = config.customAddresses && Object.values(config.customAddresses).join();\n\n  useEffect(() => {\n    let active = true;\n\n    async function loadContracts() {\n      if (providerOrSigner && typeof providerOrSigner !== \"undefined\") {\n        console.log(`loading contracts`);\n        try {\n          // we need to check to see if this providerOrSigner has a signer or not\n          let signer;\n          let provider;\n          let accounts;\n\n          if (providerOrSigner && typeof providerOrSigner.listAccounts === \"function\") {\n            accounts = await providerOrSigner.listAccounts();\n          }\n\n          if (ethers.Signer.isSigner(providerOrSigner)) {\n            signer = providerOrSigner;\n            provider = signer.provider;\n          } else if (accounts && accounts.length > 0) {\n            signer = providerOrSigner.getSigner();\n            provider = providerOrSigner;\n          } else {\n            signer = providerOrSigner;\n            provider = providerOrSigner;\n          }\n\n          const providerNetwork = await provider.getNetwork();\n\n          const _chainId = config.chainId || providerNetwork.chainId;\n\n          let contractList = {};\n          let externalContractList = {};\n          try {\n            contractList = config.hardhatContracts || require(\"../contracts/hardhat_contracts.json\");\n          } catch (e) {\n            console.log(e);\n          }\n          try {\n            externalContractList = config.externalContracts || require(\"../contracts/external_contracts.js\");\n          } catch (e) {\n            console.log(e);\n          }\n\n          let combinedContracts = {};\n\n          if (contractList[_chainId]) {\n            for (const hardhatNetwork in contractList[_chainId]) {\n              if (Object.prototype.hasOwnProperty.call(contractList[_chainId], hardhatNetwork)) {\n                if (!config.hardhatNetworkName || hardhatNetwork === config.hardhatNetworkName) {\n                  combinedContracts = {\n                    ...combinedContracts,\n                    ...contractList[_chainId][hardhatNetwork].contracts,\n                  };\n                }\n              }\n            }\n          }\n\n          if (externalContractList[_chainId]) {\n            combinedContracts = { ...combinedContracts, ...externalContractList[_chainId].contracts };\n          }\n\n          const newContracts = Object.keys(combinedContracts).reduce((accumulator, contractName) => {\n            const _address =\n              config.customAddresses && Object.keys(config.customAddresses).includes(contractName)\n                ? config.customAddresses[contractName]\n                : combinedContracts[contractName].address;\n            accumulator[contractName] = new ethers.Contract(_address, combinedContracts[contractName].abi, signer);\n            return accumulator;\n          }, {});\n          if (active) setContracts(newContracts);\n        } catch (e) {\n          console.log(\"ERROR LOADING CONTRACTS!!\", e);\n        }\n      }\n    }\n    loadContracts();\n\n    return () => {\n      active = false;\n    };\n  }, [providerOrSigner, config.chainId, config.hardhatNetworkName, customAddressKeys, customAddressValues]);\n\n  return contracts;\n}\n"]},"metadata":{},"sourceType":"module"}