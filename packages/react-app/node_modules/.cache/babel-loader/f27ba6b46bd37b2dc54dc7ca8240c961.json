{"ast":null,"code":"import { GraphQLNonNull, GraphQLList } from 'graphql';\nimport { getTokenAtPosition, getTypeInfo } from './getAutocompleteSuggestions';\nexport function getHoverInformation(schema, queryText, cursor, contextToken) {\n  const token = contextToken || getTokenAtPosition(queryText, cursor);\n\n  if (!schema || !token || !token.state) {\n    return '';\n  }\n\n  const state = token.state;\n  const kind = state.kind;\n  const step = state.step;\n  const typeInfo = getTypeInfo(schema, token.state);\n  const options = {\n    schema\n  };\n\n  if (kind === 'Field' && step === 0 && typeInfo.fieldDef || kind === 'AliasedField' && step === 2 && typeInfo.fieldDef) {\n    const into = [];\n    renderField(into, typeInfo, options);\n    renderDescription(into, options, typeInfo.fieldDef);\n    return into.join('').trim();\n  } else if (kind === 'Directive' && step === 1 && typeInfo.directiveDef) {\n    const into = [];\n    renderDirective(into, typeInfo, options);\n    renderDescription(into, options, typeInfo.directiveDef);\n    return into.join('').trim();\n  } else if (kind === 'Argument' && step === 0 && typeInfo.argDef) {\n    const into = [];\n    renderArg(into, typeInfo, options);\n    renderDescription(into, options, typeInfo.argDef);\n    return into.join('').trim();\n  } else if (kind === 'EnumValue' && typeInfo.enumValue && 'description' in typeInfo.enumValue) {\n    const into = [];\n    renderEnumValue(into, typeInfo, options);\n    renderDescription(into, options, typeInfo.enumValue);\n    return into.join('').trim();\n  } else if (kind === 'NamedType' && typeInfo.type && 'description' in typeInfo.type) {\n    const into = [];\n    renderType(into, typeInfo, options, typeInfo.type);\n    renderDescription(into, options, typeInfo.type);\n    return into.join('').trim();\n  }\n\n  return '';\n}\n\nfunction renderField(into, typeInfo, options) {\n  renderQualifiedField(into, typeInfo, options);\n  renderTypeAnnotation(into, typeInfo, options, typeInfo.type);\n}\n\nfunction renderQualifiedField(into, typeInfo, options) {\n  if (!typeInfo.fieldDef) {\n    return;\n  }\n\n  const fieldName = typeInfo.fieldDef.name;\n\n  if (fieldName.slice(0, 2) !== '__') {\n    renderType(into, typeInfo, options, typeInfo.parentType);\n    text(into, '.');\n  }\n\n  text(into, fieldName);\n}\n\nfunction renderDirective(into, typeInfo, _options) {\n  if (!typeInfo.directiveDef) {\n    return;\n  }\n\n  const name = '@' + typeInfo.directiveDef.name;\n  text(into, name);\n}\n\nfunction renderArg(into, typeInfo, options) {\n  if (typeInfo.directiveDef) {\n    renderDirective(into, typeInfo, options);\n  } else if (typeInfo.fieldDef) {\n    renderQualifiedField(into, typeInfo, options);\n  }\n\n  if (!typeInfo.argDef) {\n    return;\n  }\n\n  const name = typeInfo.argDef.name;\n  text(into, '(');\n  text(into, name);\n  renderTypeAnnotation(into, typeInfo, options, typeInfo.inputType);\n  text(into, ')');\n}\n\nfunction renderTypeAnnotation(into, typeInfo, options, t) {\n  text(into, ': ');\n  renderType(into, typeInfo, options, t);\n}\n\nfunction renderEnumValue(into, typeInfo, options) {\n  if (!typeInfo.enumValue) {\n    return;\n  }\n\n  const name = typeInfo.enumValue.name;\n  renderType(into, typeInfo, options, typeInfo.inputType);\n  text(into, '.');\n  text(into, name);\n}\n\nfunction renderType(into, typeInfo, options, t) {\n  if (!t) {\n    return;\n  }\n\n  if (t instanceof GraphQLNonNull) {\n    renderType(into, typeInfo, options, t.ofType);\n    text(into, '!');\n  } else if (t instanceof GraphQLList) {\n    text(into, '[');\n    renderType(into, typeInfo, options, t.ofType);\n    text(into, ']');\n  } else {\n    text(into, t.name);\n  }\n}\n\nfunction renderDescription(into, options, def) {\n  if (!def) {\n    return;\n  }\n\n  const description = typeof def.description === 'string' ? def.description : null;\n\n  if (description) {\n    text(into, '\\n\\n');\n    text(into, description);\n  }\n\n  renderDeprecation(into, options, def);\n}\n\nfunction renderDeprecation(into, _options, def) {\n  if (!def) {\n    return;\n  }\n\n  const reason = def.deprecationReason ? def.deprecationReason : null;\n\n  if (!reason) {\n    return;\n  }\n\n  text(into, '\\n\\n');\n  text(into, 'Deprecated: ');\n  text(into, reason);\n}\n\nfunction text(into, content) {\n  into.push(content);\n}","map":{"version":3,"sources":["../src/getHoverInformation.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["import { GraphQLNonNull, GraphQLList, } from 'graphql';\nimport { getTokenAtPosition, getTypeInfo } from './getAutocompleteSuggestions';\nexport function getHoverInformation(schema, queryText, cursor, contextToken) {\n    const token = contextToken || getTokenAtPosition(queryText, cursor);\n    if (!schema || !token || !token.state) {\n        return '';\n    }\n    const state = token.state;\n    const kind = state.kind;\n    const step = state.step;\n    const typeInfo = getTypeInfo(schema, token.state);\n    const options = { schema };\n    if ((kind === 'Field' && step === 0 && typeInfo.fieldDef) ||\n        (kind === 'AliasedField' && step === 2 && typeInfo.fieldDef)) {\n        const into = [];\n        renderField(into, typeInfo, options);\n        renderDescription(into, options, typeInfo.fieldDef);\n        return into.join('').trim();\n    }\n    else if (kind === 'Directive' && step === 1 && typeInfo.directiveDef) {\n        const into = [];\n        renderDirective(into, typeInfo, options);\n        renderDescription(into, options, typeInfo.directiveDef);\n        return into.join('').trim();\n    }\n    else if (kind === 'Argument' && step === 0 && typeInfo.argDef) {\n        const into = [];\n        renderArg(into, typeInfo, options);\n        renderDescription(into, options, typeInfo.argDef);\n        return into.join('').trim();\n    }\n    else if (kind === 'EnumValue' &&\n        typeInfo.enumValue &&\n        'description' in typeInfo.enumValue) {\n        const into = [];\n        renderEnumValue(into, typeInfo, options);\n        renderDescription(into, options, typeInfo.enumValue);\n        return into.join('').trim();\n    }\n    else if (kind === 'NamedType' &&\n        typeInfo.type &&\n        'description' in typeInfo.type) {\n        const into = [];\n        renderType(into, typeInfo, options, typeInfo.type);\n        renderDescription(into, options, typeInfo.type);\n        return into.join('').trim();\n    }\n    return '';\n}\nfunction renderField(into, typeInfo, options) {\n    renderQualifiedField(into, typeInfo, options);\n    renderTypeAnnotation(into, typeInfo, options, typeInfo.type);\n}\nfunction renderQualifiedField(into, typeInfo, options) {\n    if (!typeInfo.fieldDef) {\n        return;\n    }\n    const fieldName = typeInfo.fieldDef.name;\n    if (fieldName.slice(0, 2) !== '__') {\n        renderType(into, typeInfo, options, typeInfo.parentType);\n        text(into, '.');\n    }\n    text(into, fieldName);\n}\nfunction renderDirective(into, typeInfo, _options) {\n    if (!typeInfo.directiveDef) {\n        return;\n    }\n    const name = '@' + typeInfo.directiveDef.name;\n    text(into, name);\n}\nfunction renderArg(into, typeInfo, options) {\n    if (typeInfo.directiveDef) {\n        renderDirective(into, typeInfo, options);\n    }\n    else if (typeInfo.fieldDef) {\n        renderQualifiedField(into, typeInfo, options);\n    }\n    if (!typeInfo.argDef) {\n        return;\n    }\n    const name = typeInfo.argDef.name;\n    text(into, '(');\n    text(into, name);\n    renderTypeAnnotation(into, typeInfo, options, typeInfo.inputType);\n    text(into, ')');\n}\nfunction renderTypeAnnotation(into, typeInfo, options, t) {\n    text(into, ': ');\n    renderType(into, typeInfo, options, t);\n}\nfunction renderEnumValue(into, typeInfo, options) {\n    if (!typeInfo.enumValue) {\n        return;\n    }\n    const name = typeInfo.enumValue.name;\n    renderType(into, typeInfo, options, typeInfo.inputType);\n    text(into, '.');\n    text(into, name);\n}\nfunction renderType(into, typeInfo, options, t) {\n    if (!t) {\n        return;\n    }\n    if (t instanceof GraphQLNonNull) {\n        renderType(into, typeInfo, options, t.ofType);\n        text(into, '!');\n    }\n    else if (t instanceof GraphQLList) {\n        text(into, '[');\n        renderType(into, typeInfo, options, t.ofType);\n        text(into, ']');\n    }\n    else {\n        text(into, t.name);\n    }\n}\nfunction renderDescription(into, options, def) {\n    if (!def) {\n        return;\n    }\n    const description = typeof def.description === 'string' ? def.description : null;\n    if (description) {\n        text(into, '\\n\\n');\n        text(into, description);\n    }\n    renderDeprecation(into, options, def);\n}\nfunction renderDeprecation(into, _options, def) {\n    if (!def) {\n        return;\n    }\n    const reason = def.deprecationReason ? def.deprecationReason : null;\n    if (!reason) {\n        return;\n    }\n    text(into, '\\n\\n');\n    text(into, 'Deprecated: ');\n    text(into, reason);\n}\nfunction text(into, content) {\n    into.push(content);\n}\n//# sourceMappingURL=getHoverInformation.js.map"]},"metadata":{},"sourceType":"module"}