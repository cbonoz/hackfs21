{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useEffect, useRef } from \"react\"; // helper hook to call a function regularly in time intervals\n\nconst DEBUG = false;\nexport default function useOnBlock(provider, fn, args) {\n  _s();\n\n  const savedCallback = useRef(); // Remember the latest fn.\n\n  useEffect(() => {\n    savedCallback.current = fn;\n  }, [fn]); // Turn on the listener if we have a function & a provider\n\n  useEffect(() => {\n    if (fn && provider) {\n      const listener = blockNumber => {\n        if (DEBUG) console.log(blockNumber, fn, args, provider.listeners());\n\n        if (args && args.length > 0) {\n          savedCallback.current(...args);\n        } else {\n          savedCallback.current();\n        }\n      };\n\n      provider.on(\"block\", listener);\n      return () => {\n        provider.off(\"block\", listener);\n      };\n    }\n  }, [provider]);\n}\n\n_s(useOnBlock, \"dqNZMqbncP+HtqBlD20aSNv0Ugk=\");","map":{"version":3,"sources":["/Users/chrisbuonocore/personal/hackathons/hackfs21/packages/react-app/src/hooks/OnBlock.js"],"names":["useEffect","useRef","DEBUG","useOnBlock","provider","fn","args","savedCallback","current","listener","blockNumber","console","log","listeners","length","on","off"],"mappings":";;AAAA,SAASA,SAAT,EAAoBC,MAApB,QAAkC,OAAlC,C,CAEA;;AACA,MAAMC,KAAK,GAAG,KAAd;AAEA,eAAe,SAASC,UAAT,CAAoBC,QAApB,EAA8BC,EAA9B,EAAkCC,IAAlC,EAAwC;AAAA;;AACrD,QAAMC,aAAa,GAAGN,MAAM,EAA5B,CADqD,CAErD;;AACAD,EAAAA,SAAS,CAAC,MAAM;AACdO,IAAAA,aAAa,CAACC,OAAd,GAAwBH,EAAxB;AACD,GAFQ,EAEN,CAACA,EAAD,CAFM,CAAT,CAHqD,CAOrD;;AACAL,EAAAA,SAAS,CAAC,MAAM;AACd,QAAIK,EAAE,IAAID,QAAV,EAAoB;AAClB,YAAMK,QAAQ,GAAGC,WAAW,IAAI;AAC9B,YAAIR,KAAJ,EAAWS,OAAO,CAACC,GAAR,CAAYF,WAAZ,EAAyBL,EAAzB,EAA6BC,IAA7B,EAAmCF,QAAQ,CAACS,SAAT,EAAnC;;AAEX,YAAIP,IAAI,IAAIA,IAAI,CAACQ,MAAL,GAAc,CAA1B,EAA6B;AAC3BP,UAAAA,aAAa,CAACC,OAAd,CAAsB,GAAGF,IAAzB;AACD,SAFD,MAEO;AACLC,UAAAA,aAAa,CAACC,OAAd;AACD;AACF,OARD;;AAUAJ,MAAAA,QAAQ,CAACW,EAAT,CAAY,OAAZ,EAAqBN,QAArB;AAEA,aAAO,MAAM;AACXL,QAAAA,QAAQ,CAACY,GAAT,CAAa,OAAb,EAAsBP,QAAtB;AACD,OAFD;AAGD;AACF,GAlBQ,EAkBN,CAACL,QAAD,CAlBM,CAAT;AAmBD;;GA3BuBD,U","sourcesContent":["import { useEffect, useRef } from \"react\";\n\n// helper hook to call a function regularly in time intervals\nconst DEBUG = false;\n\nexport default function useOnBlock(provider, fn, args) {\n  const savedCallback = useRef();\n  // Remember the latest fn.\n  useEffect(() => {\n    savedCallback.current = fn;\n  }, [fn]);\n\n  // Turn on the listener if we have a function & a provider\n  useEffect(() => {\n    if (fn && provider) {\n      const listener = blockNumber => {\n        if (DEBUG) console.log(blockNumber, fn, args, provider.listeners());\n\n        if (args && args.length > 0) {\n          savedCallback.current(...args);\n        } else {\n          savedCallback.current();\n        }\n      };\n\n      provider.on(\"block\", listener);\n\n      return () => {\n        provider.off(\"block\", listener);\n      };\n    }\n  }, [provider]);\n}\n"]},"metadata":{},"sourceType":"module"}